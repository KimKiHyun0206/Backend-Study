# DB View

### 하나 또는 그 이상의 테이블을 조인하여 만든 새로운 가상 테이블.

* 실제로 테이블을 생성한 것은 아니지만, 사용자에게 실존 테이블과 동일하게 사용된다.
  * 물리적으로 존재하지 않는다는 의미이다
* 데이터 보정작업, 처리과정 시험 등 임시적인 작업을 위한 용도로 활용된다
* 조인 문의 사용 최소화로 사용상의 편의성을 최대화한다
* 뷰를 가지고 새로운 뷰를 만들 수 있다
* 주로 특정 정보만 제공하고 싶은 경우나 복잡한 쿼리를 가상 테이블로 만들어 간편하게 활용할 수 있다

## 특징
1. 뷰는 기본 테이블과 같은 형태의 구조를 사용하며, 조작도 기본 테이블과 비슷하다
2. 뷰는 물리적으로 구현되어있지 않다
3. 데이터의 논리적 독립성을 제공할 수 있다
4. 필요한 데이터만 뷰로 정의해서 처리할 수 있기 때문에 관리가 용이하고 명령문이 간단해진다
5. 뷰를 통해서만 데이터에 접근하게 하면 뷰에 나타나지 않는 데이터를 안전하게 보호하는 효율적인 기법으로 사용할 수 있다
6. 기본 테이블의 기본 키를 포함한 열 집합으로 뷰를 구성해야지만 삽입, 삭제, 갱신, 연산이 가능하다
7. 일단 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있다
8. 뷰가 정의된 기본 테이블이나 뷰를 삭제하면 그 테이블이나 뷰를 기초로 정의된 다른 뷰도 자동으로 삭제된다

### 예시

1. 민감한 정보를 가진 테이블 두 개가 있다
2. 하지만 이 두 테이블을 조인하여 사용하여야 한다
3. 이때 민감한 정보를 제외하고 필요한 컬럼만 조인하여 뷰를 만든다
4. 개발자에게 해당 뷰를 접근할 수 있도록 한다

<br>

# 만드는 방법

```sql
CREATE VIEW viewTableEx1 AS
(
SELECT CustomerID, OrderID, Quantity
FROM Orders
WHERE ProductID = "P1" );
-- 생성할 뷰의 이름은 viewTableEx1
```

* 이는 간단한 예제이다. 하지만 이 뷰를 만들어 놓음으로써 쿼리를 간단하게 작성할 수 있다

```sql
CREATE VIEW viewTableEx2 AS
(
SELECT Customer.CustomerName, Orders.Quantity
FROM Customer
         JOIN Orders
              ON Customer.CustomerID = Orders.CustomerID );
```

<br>

뷰 삭제 명령문은 아래와 같다

```sql
DROP VIEW viewTableEx2;
-- 뷰 viewTableEx2 삭제
```

<br>

# 뷰 조회 방법

일반적으로 테이블을 `SELECT` 하는 것과 동일하다

```sql
SELECT CustomerID, OrderID, Quantity
FROM viewTableEx
WHERE CustomerID = "Cus1190";
```

* 뷰를 읽기 전용으로 만들고 싶은 경우에 쿼리 마지막에 with read only를 사용하면 된다
* 그러면 CRUD 중 R만 가능하게 된다
* 외부에 사용하기 좋아진다


<br>

# 장점
* 데이터 조회가 용이하다 = 복잡한 쿼리를 단순화
* 논리적 데티터 독립성 제공
* 동일 데이터에 대해 동시에 여러 사용자의 상이한 응용이나 요구 지원
* 데이터 관리 간단
* 접근 제어를 통한 자동 보안 제공
* 물리적인 공간이 필요하지 않다
# 단점
* 뷰에 인덱스를 구성할 수 없다
* 뷰를 포함하여 뷰를 만든 경우 연관 뷰를 삭제하면 생성된 뷰도 삭제된다
* ALTER VIEW 문을 사용할 수 없다 = 뷰의 정의를 변경할 수 없다
* 삽입, 삭제, 갱신, 연산에 제약이 따른다

