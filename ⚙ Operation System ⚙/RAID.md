# RAID

#### Redundant Array of Independent Dusk, 독립된 디스크의 복수 배열

#### Redundant Array of Inexpensive Disk, 저렴한 디스크의 복수 배열

위 두 가지의 약자이다. 이는 말 그대로 여러 개의 디스크를 묶어 하나의 디스크처럼 사용하는 기술이다

* 컴퓨터를 구성하는 여러 부품(구성품) 중 기계적인 특성 때문에 상대적으로 속도가 많이 느린 하드 디스크를 보완하기 위해 만든 기술이다
* RAID 를 구성하는 디스크의 개수가 같아도, RAID 의 구성 방식에 따라 성능, 용량이 바뀐다
* 이 구성 방식을 RAID Level 이라고 부른다

## 기대 효과

* 대용량의 단일 볼륨을 사용하는 효과
* 디스크 I/O 병렬화로 인한 성능 향상
    * RAID 0, RAID 5, RAID 6 등
* 데이터 복제로 인한 안정성 향상
    * RAID 1 등

<br>

# Standard RAID Level

> 기본적으로 RAID Level 은 0~6까지 존재한다

* 최근 출시되는 RAID Controller 에서 사용 가능한 RAID Level 은 0, 1, 5, 6 이다

<br>

# RAID 0

> 성능과 용량은 최대한으로 사용하는 대신 안전성이 매우 낮다
![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level0.png)

* Striping(스트라이핑) 이라고도 부르는 방식이다

|   이름   | 필요 디스크 수 |       저장 방식       |     성능      |     용량      | 장점                    |                           단점                           |
|:------:|:--------:|:-----------------:|:-----------:|:-----------:|:----------------------|:------------------------------------------------------:|
| RAID 0 |   최소 2   | 모든 디스크에 데이터 분할 저장 | 단일 디스크의 N 배 | 단일 디스크의 N 배 | 단일 디스크보다 성능과 용량이 뛰어나다 | 단일 디스크의 1/N 배<br/>(하나의 디스크라도 문제가 발생할 경우 전체 RAID 가 깨진다) |

# RAID 1

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level1.png)

|   이름   |        필요 디스크 수         |                           저장 방식                           |              성능               |      용량      | 장점                             |         단점         |
|:------:|:-----------------------:|:---------------------------------------------------------:|:-----------------------------:|:------------:|:-------------------------------|:------------------:|
| RAID 1 | 최소 2<br/>(2개 이상도 사용 가능) | 모든 디스크에 데이터를 복제하여 기록<br/>- 동일한 데이터를 N 개로 복제하여 각 디스크에 저장한다 | 단일 디스크보다 Write 성능이 낮게 나올 수 있다 | 단일 디스크와 동일하다 | 높은 안정성<br/>(고장나도 데이터 사용이 가능하다) | 보통 비용 문제로 사용하지 않는다 |

# RAID 2

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level2.png)

|   이름   | 필요 디스크 수 |                             저장 방식                              |      성능       |      용량       | 장점         |               단점               |
|:------:|:--------:|:--------------------------------------------------------------:|:-------------:|:-------------:|:-----------|:------------------------------:|
| RAID 2 |   최소 3   | bit 단위로 Striping<br/>Error Correction 을 위해 Hamming Code 를 사용한다 | 단일 디스크의 N-1 배 | 단일 디스크의 N-1 배 | 에러 시 복구 가능 |   2 개 이상의 디스크에서 에러 시 복구 불가능    |

* 현제 사용하지 않는 RAID Level
* M + 1 개의 데이터 디스크와 M 개의 패리티 디스크로 구성된다

# RAID 3

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level3.png)

|   이름   | 필요 디스크 수 |                           저장 방식                            |      성능       |      용량       | 장점         |         단점         |
|:------:|:--------:|:----------------------------------------------------------:|:-------------:|:-------------:|:-----------|:------------------:|
| RAID 3 |   최소 3   | Byte 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용 | 단일 디스크의 N-1 배 | 단일 디스크의 N-1 배 | 에러 시 복구 가능 | Striping 다위가 너무 작다 |

* 현재 사용하지 않는 RAID Level
* 1 개의 디스크 에러 시 복구 가능
    * 2 개 이상의 디스크 에러 시 복구 불가능

# RAID 4

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level4.png)

|   이름   | 필요 디스크 수 |                            저장 방식                            |      성능       |      용량       | 장점         |                단점                 |
|:------:|:--------:|:-----------------------------------------------------------:|:-------------:|:-------------:|:-----------|:---------------------------------:|
| RAID 4 |   최소 3   | Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용 | 단일 디스크의 N-1 배 | 단일 디스크의 N-1 배 | 에러 시 복구 가능 | 패리티 디스크의 사용량이 높아 해당 디스크의 수명이 줄어든다 |

* 현재 거의 사용하지 않는 RAID Level
* Block 단위로 Striping 하는 것은 RAID 5, RAID 6 과 동일
    * 하지만 패리티 디스크를 동일한 디스크에 저장
    * 이는 패리티 디스크의 사용량이 높아 해당 디스크의 수명을 줄인다
    * RAID 4 의 단점을 개선시킨 것이 RAID 5

# RAID 5

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level5.png)

|   이름   | 필요 디스크 수 |                            저장 방식                            |      성능       |      용량       | 장점                |            단점            |
|:------:|:--------:|:-----------------------------------------------------------:|:-------------:|:-------------:|:------------------|:------------------------:|
| RAID 5 |   최소 3   | Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용 | 단일 디스크의 N-1 배 | 단일 디스크의 N-1 배 | RAID 0 보다 안정성이 높다 | RAID 0 에서 성능, 용량을 조금 줄였다 |

* 제일 사용 빈도가 높다
* 패리티를 저장하는 디스크를 고정하지 않고 매번 다른 디스크에 저장

# RAID 6

> 서버 환경에서 주로 사용한다
![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Level6.png)

|   이름   | 필요 디스크 수 |                            저장 방식                            |      성능       |      용량       | 장점                    |            단점            |
|:------:|:--------:|:-----------------------------------------------------------:|:-------------:|:-------------:|:----------------------|:------------------------:|
| RAID 6 |   최소 4   | Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 2 개 사용 | 단일 디스크의 N-2 배 | 단일 디스크의 N-2 배 | RAID 5 보다 안정성이 좀 더 높다 | RAID 5 보다 용량과 성능이 조금 줄었다 |

* 2개의 디스크 에러 시 복구 가능
    * 3 개 이상의 디스크 에러 시 복구 불가능

<br>

# 정리

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-정리.png)

|   이름   | 필요 디스크 수 |                             저장 방식                              |              성능               |      용량       | 장점                             |                                        단점                                        |
|:------:|:--------:|:--------------------------------------------------------------:|:-----------------------------:|:-------------:|:-------------------------------|:--------------------------------------------------------------------------------:|
| RAID 0 |   최소 2   |                       모든 디스크에 데이터 분할 저장                        |          단일 디스크의 N 배          |  단일 디스크의 N 배  | 단일 디스크보다 성능과 용량이 뛰어나다          |              단일 디스크의 1/N 배<br/>(하나의 디스크라도 문제가 발생할 경우 전체 RAID 가 깨진다)              |
| RAID 1 |   최소 2   |   모든 디스크에 데이터를 복제하여 기록<br/>- 동일한 데이터를 N 개로 복제하여 각 디스크에 저장한다    | 단일 디스크보다 Write 성능이 낮게 나올 수 있다 | 단일 디스크와 동일하다  | 높은 안정성<br/>(고장나도 데이터 사용이 가능하다) |                                보통 비용 문제로 사용하지 않는다                                |
| RAID 2 |   최소 3   | bit 단위로 Striping<br/>Error Correction 을 위해 Hamming Code 를 사용한다 |         단일 디스크의 N-1 배         | 단일 디스크의 N-1 배 | 에러 시 복구 가능                     |                            2 개 이상의 디스크에서 에러 시 복구 불가능                             |
| RAID 3 |   최소 3   |   Byte 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용   |         단일 디스크의 N-1 배         | 단일 디스크의 N-1 배 | 에러 시 복구 가능                     |                                Striping 다위가 너무 작다                                |
| RAID 4 |   최소 3   |  Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용   |         단일 디스크의 N-1 배         | 단일 디스크의 N-1 배 | 에러 시 복구 가능                     |                        패리티 디스크의 사용량이 높아 해당 디스크의 수명이 줄어든다                         |
| RAID 5 |   최소 3   |  Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 1 개 사용   |         단일 디스크의 N-1 배         | 단일 디스크의 N-1 배 | RAID 0 보다 안정성이 높다              |                             RAID 0 에서 성능, 용량을 조금 줄였다                             |
| RAID 6 |   최소 4   |  Block 단위로 Striping<br/>Error Correction 을 위해 패리티 디스크 2 개 사용   |         단일 디스크의 N-2 배         | 단일 디스크의 N-2 배 | RAID 5 보다 안정성이 좀 더 높다          |                             RAID 5 보다 용량과 성능이 조금 줄었다                             |

<br>

# Nested RAID, 중첩 RAID

> Standard RAID 를 여러 개 중첩하여 사용한다.
> 복수의 Standard RAID 를 다시 RAID 로 묶는다

* 2 개의 RAID 0 을 RAID 1로 묶을 수 있다 (RAID 0+1 | RAID 01)
* 2 개의 RAID 1을 RAID 0으로 묶을 수 있다 (RAID 1+0 | RAID 10)

![img.png](../🔲%20Image%20🔲/Algorithm/RAID-RAID%200+1.png)
![img.png](../🔲%20Image%20🔲/Algorithm/RAID-RAID%201+0.png)
![img.png](../🔲%20Image%20🔲/Algorithm/RAID-Nested%20Raid.png)
