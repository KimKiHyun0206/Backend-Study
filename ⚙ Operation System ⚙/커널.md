# 커널, Kernel

> 💡 **컴퓨터 공학에서 컴퓨터 운영체제의 핵심이 되는 컴퓨터 프로그램이다**

* 시스템의 모든 것을 완전히 제어(Control)한다
* 운영 체제의 다른 부분 및 응용 프로그램 수행에 필요한 여러 가지 서비스를 제공한다
* 핵심이라고도 한다

<br>

# 커널 : 역할

> 💡 **커널은 운영체제의 핵심 부분이므로, 커널의 역할 역시 운영체제의 핵심 역할이라고 할 수 있다**

### 보안

커널은 컴퓨터 하드웨어와 프로세스의 보안을 책임진다

### 자원 관리

* 한정된 시스템 자원을 효율적으로 관리하여 프로그램의 실행을 원활하게 한다
* 특히 프로세스에 처리기를 할당하는 것을 스케줄링이라고 한다

### 추상화

> 💡 **같은 종류의 부품에 대하 다양한 하드웨어를 설계할 수 있기 때문에 하드웨어에 직접 접근하는 것은 문제를 매우 복잡하게 만들 수 있다**

<div>

![img.png](../🔲%20Image%20🔲/Operation%20System/커널-하드웨어%20추상화.png)

</div>


* 따라서 커널은 운영체제의 복잡한 내부를 감추고 깔끔하고 일관성 있는 인터페이스를 하드웨어에 제공하기 위해 몇 가지 하드웨어 추상화를 구현한다
* 이 하드웨어 추상화는 프로그래머가 여러 장비에서 작동하는 프로그램을 개발하는 것을 돕는다
* 하드웨어 추상화 계층, Hardware Abstract Layer : 제조사의 장비 규격에 대한 특정한 명령어를 제공하는 소프트웨어 드라이버에 의존한다

> #### ❗ 하드웨어 추상화
> 같은 종류의 장비에 대한 공통 명령어의 집합들

<br>

# 커널 : 역사

## 초기의 커널, Early Kernel

* 초기의 운영체제에 커널은 필수적인 것이 아니었다
* 초기의 프로그램은 하드웨어 추상화나 운영체제의 지원을 받지 않고도 컴퓨터만으로 불러들인 다음 실행할 수 있었다
* 이것은 초창기 컴퓨터들의 일반적인 운영 방식이었다
    * 다른 프로그램을 실행하기 위해서는 컴퓨터의 전원을 껐다가 켬으로써 다시 입력자료를 읽어들여야 하는 방식이었다
* 이러한 과정이 반복되면서 사람들은 로더와 디버거 같은 작은 프로그램들이 상주해 있는 것이 다른 프로그램으로 교체하거나 새로운 프로그램을 개발하는데 유리하다는 사실을 알게 되었다
* 이와 같은 로더와 디버거들이 초기 운영체제 커널의 기초가 되었다

|            종류             | 설명                                                                                              |
|:-------------------------:|:------------------------------------------------------------------------------------------------|
| 단일형 커널, Monolithic Kernel | 커널의 다양한 서비스 및 높은 수준의 하드웨어 추상화를 하나의 덩어리(주소 공간)로 묶은 것<br/>운영체제 개발자 입장에서 유지보수가 일반적으로 더 어려우나 성능이 좋다 |
|   마이크로 커널, MicroKernel    | 하드웨어 추상화에 대한 간결한 작은 집합을 제공하고 더 많은 기능을 서버라고 불리는 응용 소프트웨어를 통해 제공한다                                |
|   혼합형 커널, Hybrid Kernel   | 성능 향상을 위해 추가적인 코드를 커널 공간에 넣은 점을 제외하면 많은 부분은 순수 마이크로 커널과 비슷하다.<br/>수정 마이크로커널이라고도 한다              |
|     나노커널, NanoKernel      | 실질적으로 모든 서비스를 책임진다                                                                              |
|      엑소커널, ExoKernel      | 낮은 수준의 하드웨어 접근을 위한 최소한의 추상화를 제공한다.<br/>전형적으로 엑소커널 시스템에서는 커널이 아닌 라이브러리가 단일형 커널 수준의 추상을 제공한다      |

### 단일형 커널, Monolithic Kernel

> 💡 **하드웨어 위에 높은 수준의 가상 계층을 정의한다.**

<div align="center">

![img.png](../🔲%20Image%20🔲/Operation%20System/커널-단일형%20커널.png)

</div>

#### 단일형 커널 : 특징
> 💡 **높은 수준의 가상 계층은 기본 연산 집합과 관리자 모드에서 작동하는 모듈인 프로세스 관리, 동시성, 메모리 관리 등의 운영체제 서비스를 구현하기 위한 시스템 콜로 되어있다**

* 코드의 집적도는 매우 조밀하여 수정하기 어렵다
* 한 모듈의 버그는 시스템 전반을 멈추게할 수 있다
* 하지만 구현이 신뢰할 수 있을 정도로 완성되면 구성 요소의 내부 집적이 내부의 시스템 이용울 효과적이게 하여 좋은 단일형 커널은 높은 효율을 보인다
* 단일형 커널 지지자들은 코드의 정확성 여부와 그런 코드(부적확한 코드)가 커널에 포함되었는지 확인할 수 있고, 이를 근거로 마이크로 커널에 비해 좀 더 우위에 있다고 주장한다

<br>

### 단일형 커널 : 운영체제 사용 예시

* 리눅스, FreeBSD, 솔라리스와 같은 최산 단일형 커널은 실행 모듈을 실시간으로 읽어들일 수 있다
* 실시간으로 실행하는 모듈을 읽는 특징은 커널이 허용하는 범위 내에서 손쉽게 확장할 수 있게 커널 공간의 코드의 양을 최소한으로 유지시킨다
* 마이크로소프트 윈도우 NT 제품군은 처음에는 혼합형 커널이었으나 나중에 나온 것들은 단일형 커널이다

> #### ❗ 단일형 커널 운영체제
> * 유닉스
> * BSD
> * 리눅스
> * 솔라리스
> * 윈도우 NT
> * 벨로나2
> * AIX
> * AGNIX

<br>
<br>



### 마이크로 커널, MicroKernel
> 💡 **하드웨어 위에 매우 간결한 추상화를 정의한다**
<div align="center">

![img.png](../🔲%20Image%20🔲/Operation%20System/커널-마이크로커널.png)

</div>

#### 마이크로 커널 : 특징
> 💡 **기본 연산 집합과 운영체제 서비스를 구현한 스레드 관리, 주소 공간, 프로세스간 통신은 작은 시스템 콜으로 이루어져 있다**
* 일반적으로 커널이 제공하는 네트워킹과 같은 다른 서비스들은 사용자 공간 프로그램인 **서버**로 구현한다
* 운영체제는 서버를 다른 일반적인 프로그램처럼 간단히 시작하고 끌 수 있다
  * 네트워킹 지원이 필요 없는 작은 시스템은 간단히 서버를 끄면 된다
  * 이 경우 전통적인 시스템에서는 재컴파일이 필요했고, 일반 사용자의 능력 밖의 일이다
* 이론적으로 마이크로커널에서 시스템은 더 안정적이다
* 서버가 중단될 때 커널의 충돌이 아니기 때문에 단 하나의 프로그램만 내려버리면 된다

<br>

#### 마이크로 커널 : 단점

* 그러나 서버가 실패한 후 시스템 상태도 잃어버릴 경우 응용 프로그램이 계속 수행되는 것은 그 응용 프로그램이 막 복사된 다른 서버를 이용하게 되더라도 보통은 매우 힘들다
* 기록할 정보들은 모두 미리 보관해 두어야 한다
* 서버 간의 하나의 서버를 다시 시작할 떄 중요 상태를 보호하기 위해 트랜잭션, 복제, 대조점의 데이터베이스 기술이 요구된다

<br>

#### 마이크로 커널 : 운영체제 사용 예시

* 일반적으로 마이크로 커널은 전통적인 디자인의 수행을 잘 못 하며 때로는 극적이다
* 이유는 응용과 서버 간의 자료 교환을 위해 커널을 출입하는 **문맥 교환** 때문이다
* 주의 깊은 조율이 오버헤드를 극적으로 줄여줄 것으로 믿어져 왔으나 90년대 이후부터 대부분이 포기했다
* 현재 운영체제 시장은 마이크로커널 설계에 소극적이다

> #### ❗ 마이크로커널 운영체제
> * AmigaOS
> * Amoeba
> * ChorusOS
> * EROS
> * Haiku
> * K42
> * LSE/OS(나노 커널)
> * etc...

<br>
<br>

### 하이브리드 커널(수정 마이크로 커널), Hybrid Kernel
> 💡 **본질적으로 마이크로 커널을 따르나, 일부 커널의 비본질적 기능이더라도 사용자 게벨에서 수행될 때 성능상 느린 코드를 커널 레벨에서 수행하도록 수정한 것을 말한다**

<div align="center">

![img.png](../🔲%20Image%20🔲/Operation%20System/커널-하이브리드커널.png)

</div>

#### 하이브리드 커널 : 특징

* 다양한 운영체제 개발자들이 마이크로 커널 기반의 설계를 받아들이던 시점에 순수한 마이크로 커널의 성능산의 한계를 인식하고 타협한 굘과이다

<br>

#### 하이브리드 커널 : 운영체제 사용 예시
* ReactOS
* BeOS 커널
* 넷웨어 커널

> #### ❗ 주의점
> * 혼합형 커널은 단일형 커널이 아니다 혼동하지 말라

<br>
<br>

### 엑소 커널, ExoKernel
> 💡 **운영체제 설계에 대한 급진적인 신개념으로 말단 이론을 따르는 수직 구조의 운영체제이다**

<div align="center">

![img.png](../🔲%20Image%20🔲/Operation%20System/커널-엑소커널.png)

</div>

#### 엑소 커널 : 특징
* 엑소 커널의 구상은 개발자에게 강제적인 추상화를 줄여 하드웨어 추상화에 대해 선택지를 다양하게 하는 것이다
* 엑소 커널은 기능이 보호를 보장하는 것과 자원을 분배하는 것만 하기 때문에 매우 작아 편의보다 단순함을 제공한다
* 이런 특정은 오히려 모든 사용자가 각기 실제 호스트 컴퓨터의 자원을 모방한 컴퓨터를 받는 VM/370 운영체제와 비슷하다
* 반면에 모놀리식 커널이든, 마이크로 커널이든, 전통적인 커널 설계는 하드웨어 추상화 계층이나 장치 드라이버에 아래 자원을 숨김으로써 하드웨어를 추상화한다
  * 한 예로 전통적인 시스템에서 물리 메모리가 할당될 때 실제 위치를 알려주지 않기 때문에 오프셋과 기억 관리 장치를 통해서만 문제를 해결할 수 있다

<br>
<br>

---
* [커널의 정의와 종류](https://ko.wikipedia.org/wiki/%EC%BB%A4%EB%84%90_(%EC%BB%B4%ED%93%A8%ED%8C%85))