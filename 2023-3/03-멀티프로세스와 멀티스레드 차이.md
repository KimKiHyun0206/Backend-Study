# 멀티 스레드, Multi thread

* 하나의 프로세스는 하나의 스레드를 가지고 작업을 수행한다
* 하지만 멀티 스레드는 하나의 프로세스 내에서 둘 이상의 스레드가 동시에 작업을 수행하는 것이다
* 멀티 프로세스는 여러 개의 CPU를 사용하여 여러 프로세스를 동시에 수행한다는 것을 의미한다

<br>

* 이 두 가지는 여러 흐름을 동시에 수행한다는 공통점이 있다
* 멀티 프로세스 : 각 프로세스가 독립적인 메모리를 가지고 별도로 실행된다
* 멀티 스레드 : 각 스레드가 자신이 속한 프로세스의 메모리를 공유한다

<br>

### 장점

* 시스템 자원의 낭비가 적다 : 자신이 속한 프로세스의 메모리를 공유한다
* 사용자와의 응답성이 좋아진다 : 하나의 스레드가 작업을 할 대 다른 스레드가 별도의 작업을 할 수 있다

## 문맥 교환, Context Switch

> 컴퓨터에서 동시에 처리할 수 있는 최대 작업 수는 CPU 코어의 수와 같다.
> 만약 CPU의 코어 수보다 더 많은 스레드가 실행되면, 각 코어가 정해진 시간 동안 여러 작업을 번갈아가며 수행하게 된다

<br>

문맥 교환이란 현재까지의 작업 상태나 다음 작업에 필요한 각종 데이터를 저장하고 읽어오는 작업을 가리킨다.

<br>

* 문맥 교환에 걸리는 시간이 커지면 커질수록, 멀티 스레딩의 효율이 떨어진다
* 많은 양의 단순 계산은 싱글 스레드로 동작하는 것이 더 효율적일 수 있다
* 많은 스레드를 실행하는 것이 언제나 좋은 성능을 보이는 것이 아니다.

## 스레드 스룹, Thread Group

> 서로 관련이 있는 스레드를 하나의 그룹으로 묶어 다루기 위한 장치

자바는 스레드 그룹을 다루기 위해 **ThreadGroup**이라는 클래스를 제공한다.

<br>

* 스레드 그룹은 다른 스레드 그룹을 포함할 수 있다
* 포함된 스레드 그룹은 트리 형태로 연결된다
* 스레드는 자신이 포함된 스레드 그룹이나 그 하위 그룹에는 접근할 수 있지만, 다른 그룹에는 접근할 수 없다
* 범위를 제한하는 것은 보안상으로 중요한 역할을 한다

## 데몬 스레드, Deamon Thread

> 다른 일반 스레드의 작업을 돕는 보조적인 역할을 하는 스레드.

데몬 스레드는 일반 스레드가 종료되면 더는 할 일이 없으므로, 데몬 스레드도 자동 종료된다

<br>

* 생성 방법은 일반 스레드와 같다
* 단 실행하기 전에 setDeamon() 메소드로 데몬 스레드로 설정해야 한다
* 보통 일정시간마다 자동으로 수행되는 저장 및 화면 갱신 등에 이용된다

## 가비지 컬렉터, Garbage Collector

> 프로그래머가 동적으로 할당한 메모리 중 더 이상 사용하지 않는 영역을 자동으로 찾아내어 해제 해주는 데몬 스레드이다.

* 자바에서는 프로그래머가 메모리에 직접 접근하지 못하게 하는 대신 가비지 컬렉터가 자동으로 메모리를 관리해준다
* 이러한 가비지 컬렉터를 사용하면 프로그래밍을 하기가 훨씬 쉬워지며, 메모리에 관련된 버그가 발생할 확률도 낮아진다
* 이것이 동작하는 동안에는 프로세서가 일시적으로 중지되므로, 성능이 떨어진다

<br>
<br>
<br>
<br>

# 멀티 프로세스

* 여러 개의 프로세스가 서로 협력하여 작업을 수행하는 것
* 여러 개의 프로세스가 작업을 병렬처리 하는 것
* 각 프로세스간 메모리 구분이 필요하거나 독립된 주소 공간을 가져야할 때 사용

## 장점

* 독립된 구조이기 때문에 안정성이 높다
* 한 프로세스에 문제가 생겨도 다른 프로세스들은 영향을 받지 않는다
    * 하지만 느려질 수 있다 : 그 프로세스의 일을 다른 프로세스들이 해야하기 때문
* 여러 개의 프로세스가 처리되어야할 때 동일한 데이터를 사용하고, 이러한 데이터를 하나의 디스크에 두고 모든 프로세서가 이를 공유하면 비용적으로 저렴해진다

## 단점

* 멀티 스레드보다 많은 메모리 공간과 CPU 시간을 차지한다
* 독립된 메모리 영역이기 때문에 Context Switch가 자주 일어나면 성능이 저하될 수 있다


<br>
<br>
<br>
<br>


# 차이점

|     |      Multi Thread      |  Multi Process  |
|:---:|:----------------------:|:---------------:|
| 메모리 |    한 프로세스 안에서 공유한다     | 한 디스크 안에서 공유한다  |
| 동작  | 한 스레드에 문제가 생기면 전체가 멈춘다 | 한 프로세스가 멈춰도 괜찮다 |
